<form [formGroup]="userForm" (ngSubmit)="onSubmit()">
  <div class="form-group">
    <label for="name">Name:</label>
    <input type="text" id="name" name="name" formControlName="name" required />
    <div
      *ngIf="name?.invalid && (name?.dirty || name?.touched) && name?.errors?.['required']"
      class="alert alert-danger"
    >
      <div>Name is required</div>
    </div>
  </div>

  <div class="form-group">
    <label for="gender">Gender</label>
    <select id="gender" class="form-control" formControlName="gender" required>
      <option *ngFor="let gender of genderOptions" [value]="gender">
        {{ gender }}
      </option>
    </select>

    <div
      *ngIf="gender?.invalid && (gender?.dirty || gender?.touched) && gender?.errors?.['required']"
      class="alert alert-danger"
    >
      <div>Gender is required.</div>
    </div>
  </div>

  <div class="form-group">
    <label for="date">Date of birth:</label>
    <input
      type="date"
      id="date"
      name="date"
      [max]="maxDate"
      (change)="onDateChange($event)"
      formControlName="date"
      required
    />

    <div
      *ngIf="date?.invalid && (date?.dirty || date?.touched) && date?.errors?.['required'] "
      class="alert alert-danger"
    >
      <div>Date is required.</div>
    </div>
  </div>

  <div class="form-group">
    <label for="age">Age:</label>
    <input type="number" id="age" name="age" formControlName="age" readonly />
  </div>

  <div class="form-group" formGroupName="contact">
    <label for="phone">Phone:</label>
    <input
      type="text"
      id="phone"
      name="phone"
      formControlName="phone"
      required
    />
    <div
      *ngIf="phone?.invalid && (phone?.dirty || phone?.touched)"
      class="alert alert-danger"
    >
      <div *ngIf="phone?.errors?.['required']">Phone is required.</div>
      <div *ngIf="phone?.errors?.['pattern']">
        Phone must start with '06' followed by 8 digits.
      </div>
    </div>
  </div>

  <div class="form-group">
    <label for="email">Email:</label>
    <input
      type="email"
      id="email"
      name="email"
      formControlName="email"
      required
    />
    <div
      *ngIf="email?.invalid && (email?.dirty || email?.touched)"
      class="alert alert-danger"
    >
      <div *ngIf="email?.errors?.['required']">Email is required.</div>
      <div *ngIf="email?.errors?.['pattern']">
        Email must be a valid email address
      </div>
    </div>
  </div>

  <div class="form-group">
    <label for="password">Password:</label>
    <input
      type="password"
      id="password"
      name="password"
      formControlName="password"
      required
    />
    <div
      *ngIf="password?.invalid && (password?.dirty || password?.touched)"
      class="alert alert-danger"
    >
      <div *ngIf="password?.errors?.['required']">Password is required.</div>
      <div *ngIf="password?.errors?.['pattern']">
        min length 8, at least one uppercase, at least one number
      </div>
    </div>
  </div>

  <div class="form-group">
    <label for="passwordRepeat">Repeat password:</label>
    <input
      type="password"
      id="passwordRepeat"
      name="passwordRepeat"
      formControlName="passwordRepeat"
      required
    />
    <div
      *ngIf="
        passwordRepeat?.invalid &&
        (passwordRepeat?.dirty || passwordRepeat?.touched)
      "
      class="alert alert-danger"
    >
      <div *ngIf="passwordRepeat?.errors?.['required']">
        Repeat password is required.
      </div>
    </div>
  </div>

  <button type="submit" class="btn btn-default" [disabled]="userForm.invalid">
    Submit
  </button>
  <button type="button" class="btn btn-default" (click)="userForm.reset()">
    Reset
  </button>
</form>
